性能优化的意义

网站性能， 影响到用户参与度和用户留存，从而影响到转换率和业务收益。

# 性能优化开篇 - 从 5 个角度认识性能优化

## 思考从输入 URL 到页面加载完成，发生了什么？

一道经典的面试题，现在我们站在性能优化的角度，复习一下这个过程：

```
1. 通过 DNS 将 URL 解析为对应的 IP 地址
2. 与这个 IP 地址的服务器建立 TCP 网络链接
3. 向服务端抛出 HTTP 请求
4. 服务端处理完成后将 HTTP 响应返回
5. 在浏览器上进行解析和渲染
```

我们从这 5 个过程进行分解，分别优化

DNS 解析花时间，能不能尽量减少解析次数或者把解析前置？

TCP 每次的三次握手都急死人，有没有解决方案？

HTTP 减少请求次数和减小请求体积方面

浏览器资源加载优化、服务端渲染、浏览器缓存机制的利用、DOM 树的构建、网页排版和渲染过程、回流与重绘的考量、DOM 操作的合理规避

## 如何提升页面加载速度

图片资源的预加载，懒加载，cdn加速，雪碧图/精灵图

减少HTTP请求，尽可能的合并脚本，CSS，图像，在用户的浏览器上缓存文件

压缩JS文件，图片，HTML文档，CSS文档等等。用户可以下载较小的文件，增加网页的加载速度，这样可以降低服务器的消耗

去除不必要的空格, 注释 减少文件的总尺寸，较小的页面可以获得更快的加载速度

把CSS放在顶端: css文件的加载不会阻塞dom树的解析，把CSS文件放在网站的顶端，可以让网站尽可能同时加载其他部件，如图片和文字。

把js放在底端: 在body闭合标签前插入js脚本,让这些脚本在后台加载的同时，用户先得到看似完整的页面。

async异步 或 defer 推迟 加载js脚本

避免使用CSS表达式，如：calc

避免重定向:无论是服务器端头重定向，js重定向，或者HTML元素重定向。你的网站都会加载空白的页面的头， 然后再加载新的一页，用户为了获得需要的页面花费越来越多的时间

避免重定向:无论是服务器端头重定向，js重定向，或者HTML元素重定向。你的网站都会加载空白的页面的头， 然后再加载新的一页，用户为了获得需要的页面花费越来越多的时间